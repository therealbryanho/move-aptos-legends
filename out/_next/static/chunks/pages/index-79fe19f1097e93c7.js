(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4408)}])},4408:function(e,t,n){"use strict";let a;n.r(t),n.d(t,{default:function(){return S}});var s=n(5893),o=n(9008),i=n.n(o),l=n(7294),c=n(5291),r=n.n(c),d=n(5121),u=n(3329),m=n(4667),h=n(6967),f=e=>{let{show:t,onConnect:n}=e,a=(0,m.Os)();return(0,s.jsx)(h.Z,{id:r().connectWalletModal,show:t,onHide:n,centered:!0,children:(0,s.jsx)(h.Z.Body,{className:"d-flex flex-column",children:a.wallets.map(e=>(0,s.jsxs)("button",{className:r().walletAdapterOption,onClick:async()=>{n(e.name),a.connect(e.name),console.log("Connect clicked")},children:[(0,s.jsx)("img",{src:e.icon}),(0,s.jsx)("h6",{className:"mb-0",children:e.name})]},e.name))})})},_=e=>{var t,n;let{connectButton:a,className:o,style:i,disabled:c}=e,d=(0,m.Os)(),[u,h]=(0,l.useState)(!1),_=(0,s.jsx)("button",{disabled:c,className:"".concat(r().connectWalletBtn," ").concat(o," ").concat(c?"disabled":""),onClick:function(){if(a){h(!0),console.log("ConnectWalletButton clicked");return}d.disconnect()},style:i,children:a?"Connect Wallet":"Disconnect"});return(0,s.jsxs)(s.Fragment,{children:[a?_:(null===(n=d.account)||void 0===n?void 0:null===(t=n.address)||void 0===t?void 0:t.toString())!==void 0?(0,s.jsx)("span",{className:"mx-auto w-100",children:_}):null,(0,s.jsx)(f,{show:u,onConnect:()=>h(!1)})]})};let x="0xe2b285652d01d6e8759d9237ce178c8bd133633c5940426c3f940d618dfd1b13";a="https://fullnode.testnet.aptoslabs.com/v1";var g=function(e){let{onChange:t}=e,[n,a]=(0,l.useState)(1);return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:r().quantityButton,onClick:()=>{n>1&&(a(e=>e-1),t(n-1))},children:"-"}),(0,s.jsx)("span",{id:"quantityField",className:r().quantityField,children:n}),(0,s.jsx)("button",{className:r().quantityButton,onClick:()=>{n<1&&(a(e=>e+1),t(n+1))},children:"+"})]})},p=n(2448),j=n(4173);n(2130),n(1082);var b=n(1570),v=e=>{let{show:t,closeDialog:n,dialogContent:a}=e;return(0,s.jsx)(h.Z,{size:"xl",show:t,className:"battle_dialog",onHide:n,children:a})};let w=u.ZcK.TESTNET,y=new u.ScN({network:w}),N=new u.gZG(y);function S(){var e,t,n,o;let c=(0,m.Os)(),u=(0,m.Os)(),{signAndSubmitTransaction:f}=(0,m.Os)(),[y,S]=(0,l.useState)(1),[k,H]=(0,l.useState)(!1),[T,C]=(0,l.useState)(),[A,E]=(0,l.useState)(),[B,M]=(0,l.useState)(!1),[O,I]=(0,l.useState)(),[F,P]=(0,l.useState)(),[q,W]=(0,l.useState)(),[Z,D]=(0,l.useState)(),[L,V]=(0,l.useState)([]),[U,z]=(0,l.useState)(!1),[K,X]=(0,l.useState)(!1),[R,G]=(0,l.useState)([]),[J,Y]=(0,l.useState)(!0),[Q,$]=(0,l.useState)(null),[ee,et]=(0,l.useState)(null),[en,ea]=(0,l.useState)(null),[es,eo]=(0,l.useState)(!0),[ei,el]=(0,l.useState)(!1),[ec,er]=(0,l.useState)(!1),[ed,eu]=(0,l.useState)(!0);(0,l.useEffect)(()=>{setInterval(()=>{ei||(document.body.style.overflow="auto !important")},100)},[ei]);let em=async e=>{if(e){el(!0),eo(!0),et(e);let t=e.match(/\/image\/(\d+)\.jpg/)[1];$(t),ea((await d.default.get("".concat(e.split("/image")[0],"/json/").concat(t,".json"))).data),eo(!1),eN()}},[eh,ef]=(0,l.useState)(null),[e_,ex]=(0,l.useState)(null),[eg,ep]=(0,l.useState)(""),[ej,eb]=(0,l.useState)(!1),[ev,ew]=(0,l.useState)(""),ey=["BNB Chain","Polygon","TRON","Avalanche","EOS","Fantom","Base","Solana","WAX","Cronos","Tezos","Linea","Kujira","Waves","Terra","Wanchain","Chiliz","Radix","NEO","Astar","VeChain","Boba","Hyperliquid","Scroll","Thundercore","Blast","Secret","Oraichain","Kadena","Iota","Venom","Aurora","Klaytn","Moonbeam","NEAR","Kava","Cosmos","Sei","Celo","EOS","TON","Steem","Hive","Cardano","Ontology","Flow","Oasys","Ziliqa","Algorand","XRP","ZetaChain","Telos","Hedera","Ronin","Sui","Stellar"],eN=()=>{eu(!0),setTimeout(()=>{let e=ey[Math.floor(Math.random()*ey.length)];ep("".concat(e," Maxi")),ef(Math.floor(9*Math.random())+1),ex(Math.floor(9*Math.random())+1),eu(!1)},3e3)};async function eS(){try{Y(!0);let e=await N.getAccountOwnedTokensFromCollectionAddress({accountAddress:eH,collectionAddress:"807517225962f30cea6f67597242279aeb5196483a8a8d51468f74545bb2f129"}),t=[];for(let n=0;n<e.length;n++){let a=e[n],s=a.current_token_data.token_uri,o=a.current_token_data.token_properties.health,i=await ek(s);i&&t.push({imageUrl:i,healthPoints:o})}G(t),Y(!1)}catch(e){console.error("Error fetching tokens:",e)}}async function ek(e){try{let t=await fetch(e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return(await t.json()).image}catch(e){console.error("Error fetching or parsing JSON:",e)}}(0,l.useEffect)(()=>{var e;!c.autoConnect&&(null===(e=c.wallet)||void 0===e?void 0:e.adapter)&&c.connect()},[c.autoConnect,c.wallet,c.connect]),(0,l.useEffect)(()=>{z(!1),M(!0),H(!1),X(!1),eB(),c.connected&&(eS(),q&&(L.includes(eH)?X(!0):(X(!1),j.Am.error("Unable to mint as your address is not in the whitelist."))))},[c]);let eH=null===(t=c.account)||void 0===t?void 0:null===(e=t.address)||void 0===e?void 0:e.toString(),eT=async()=>{console.log("account_address ::"+eH),void 0===eH&&(z(e=>!e),await new Promise(e=>setTimeout(e,3e3)),z(e=>!e),console.log("account_address undefined"));let e=document.getElementById("quantityField");if(!e){console.error("Quantity span element not found");return}let t=parseInt(e.textContent,10);if(isNaN(t)){console.error("Invalid quantity value");return}try{console.log("setMinting before"),H(!0);let e=await f({sender:u.address,data:{function:"".concat(x,"::minting::mint_nft"),typeArguments:[],functionArguments:[t]}});await N.waitForTransaction({transactionHash:e.hash}).then(async()=>{eB(),console.log("setMinting after"),await eE(e.hash).then(async t=>{var n;console.log("txversion: "+t),j.Am.success((0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Minting Success!"}),(0,s.jsx)("a",{href:"https://explorer.aptoslabs.com/txn/".concat(e.hash,"?network=").concat(w),target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("p",{children:"View Transaction"})})]})),H(!1),null===(n=document.getElementById("nftList"))||void 0===n||n.scrollIntoView({behavior:"smooth"}),await eS()})})}catch(e){e.message,H(!1),console.log("setMinting error"+e)}},eC=async()=>{var e,t;eb(!0),ew(""),console.log("account_address ::"+eH);let n=parseInt(null==en?void 0:null===(e=en.attributes[0])||void 0===e?void 0:e.value),a=parseInt(null==en?void 0:null===(t=en.attributes[1])||void 0===t?void 0:t.value);console.log({ap:n,dp:a,npcap:eh,npcdp:e_});try{console.log("battle before");let e=await f({sender:u.address,data:{function:"".concat(x,"::minting::battle"),typeArguments:[],functionArguments:[n,a,eh,e_]}});await N.waitForTransaction({transactionHash:e.hash}).then(()=>{console.log("battle after"),j.Am.success((0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Battle Results!"}),(0,s.jsx)("a",{href:"https://explorer.aptoslabs.com/txn/".concat(e.hash,"?network=").concat(w),target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("p",{children:"View Transaction"})})]}))}).catch(e=>{console.log(e),eb(!1)}),await eA(e.hash).then(e=>{console.log("getTransactionWhoWon: "+e),eb(!1)})}catch(e){e.message,console.log("battle error"+e),eb(!1)}};async function eA(e){try{let t=await fetch("https://fullnode.testnet.aptoslabs.com/v1/transactions/by_hash/"+e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let n=await t.json(),a=null;for(let e of n.events)if(e.type==="".concat(x,"::minting::BattleEvent")){a=e.data.winner,console.log("winner:: "+a),"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"===a?(er(!0),ew("NPC Won!")):(await d.default.post("https://meme-generator-backend-production.up.railway.app/api/user/generateDominatedImage",{caption:eg}),er(!0),ew("Congratulations! You won!"));break}return n.version}catch(e){console.error("Error fetching transaction version:",e)}}async function eE(e){try{let t=await fetch("https://fullnode.testnet.aptoslabs.com/v1/transactions/by_hash/"+e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let n=await t.json(),a=null,s=null;for(let e of n.events)if("0x3::token::CreateTokenDataEvent"===e.type){a=e.data.name,s=e.data.property_values;break}let o=function(e){let t=e.split("#");return t.length>1?t[1].trim():null}(a);console.log("Token Number:: "+o),console.log("Token property_values:: "+s);let i=String(s).split(","),l=parseInt(i[0],16);console.log("attackValue::"+l+" -- "+i[0]);let c=parseInt(i[1],16);console.log("defenseValue::"+c+" -- "+i[1]);let r=parseInt(i[2],16);console.log("healthValue::"+r+" -- "+i[2]),await d.default.post("https://meme-generator-backend-production.up.railway.app/api/user/generateNFTImageAndJson",{nftNumber:o,attackValue:l,defenseValue:c,healthValue:r}).then(async()=>n.version).catch(e=>{throw e})}catch(e){console.error("Error fetching transaction version:",e)}}async function eB(){let e=await d.default.get("".concat(a,"/accounts/").concat(x,"/resources"));console.log(e);let t=e.data;for(let a of(console.log(e.data),t))if(a.type==="".concat(x,"::minting::ModuleData")){var n,s;I(a.data.expiration_timestamp),C(a.data.current_supply),E(a.data.maximum_supply),D(a.data.collection_name),V(a.data.whitelist_addr),W(a.data.whitelist_only),(null===(s=c.account)||void 0===s?void 0:null===(n=s.publicKey)||void 0===n?void 0:n.toString())==a.data.public_key.bytes&&(M(!B),console.log("this is admin")),!1==a.data.presale_status&&!1==a.data.publicsale_status&&(H(!1),M(!B)),a.data.presale_status&&a.data.publicsale_status?P(a.data.public_price):!0==a.data.presale_status?P(a.data.per_sale_price):P(a.data.public_price)}}return(0,s.jsxs)("div",{className:"bg-gray-500",children:[(0,s.jsxs)("div",{className:r().container,children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"Aptos Legends"}),(0,s.jsx)("meta",{name:"description",content:"Aptos Legends"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,s.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,s.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:!0}),(0,s.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&display=swap",rel:"stylesheet",crossOrigin:"anonymous"})]}),(0,s.jsx)("img",{src:"https://img.freepik.com/free-vector/dark-black-background-design-with-stripes_1017-38064.jpg?t=st=1721174484~exp=1721178084~hmac=8285798c783503f528c397a8559437ef690d9e012c44bd1207cef9e09bef6eb2&w=2000",alt:"background",className:r().bg_image}),(0,s.jsx)("div",{className:r().bg_filter}),(0,s.jsxs)("main",{className:r().main,children:[(0,s.jsx)("h1",{className:r().title,children:Z}),(0,s.jsx)("div",{className:r().topcorner,children:(0,s.jsx)(_,{connectButton:!c.connected,className:"d-flex"})}),(0,s.jsx)("div",{id:"header",style:{fontWeight:"bold",fontSize:"20px",marginBottom:"20px",color:"white",textAlign:"center"},children:"Mint an AI-infused meme NFT and battle wojak!"}),(0,s.jsx)("img",{src:"https://vlbhndrnwwflmnjachef.supabase.co/storage/v1/object/public/development/collection.jpg",className:r().mintimage}),(0,s.jsxs)("div",{id:"collection-info",className:"d-flex flex-column align-items-center text-white",style:{width:"80%"},children:[(0,s.jsx)(g,{onChange:e=>{S(e)}}),q&&K||!K?(0,s.jsx)("div",{className:"d-flex align-items-center my-3",children:(0,s.jsx)("button",{className:r().button,onClick:eT,disabled:!B,children:k?(0,s.jsx)(p.Z,{animation:"border",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):"Mint"})}):(0,s.jsx)("br",{}),(0,s.jsxs)("div",{className:r().mintstats,children:[q&&K||!K?(0,s.jsxs)("div",{className:r().spacebetween,children:[(0,s.jsx)("h6",{children:"Mint fee: "}),(0,s.jsxs)("h6",{id:"mintfee",children:[F/1e8," APT"]})]}):"",(0,s.jsxs)("div",{className:r().spacebetween,children:[(0,s.jsx)("h6",{children:"Current Supply: "}),(0,s.jsx)("h6",{children:T||"0"})]}),(0,s.jsxs)("div",{className:r().spacebetween,children:[(0,s.jsx)("h6",{children:"Maximum Supply: "}),(0,s.jsx)("h6",{children:A})]}),(0,s.jsxs)("div",{className:r().spacebetween,children:[(0,s.jsx)("h6",{children:"Mint Deadline: "}),(0,s.jsx)("h6",{children:function(e){console.log("Timestamp ::"+e);let t=new Date(1e3*e),n=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear(),o=t.getHours(),i=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0"),c=o>=12?"PM":"AM";o%=12;let r=String(o=o||12).padStart(2,"0"),d="".concat(n,"/").concat(a,"/").concat(s),u="".concat(r,":").concat(i,":").concat(l," ").concat(c);return"".concat(d," ").concat(u)}(O)})]})]}),(0,s.jsx)("div",{className:"".concat(r().notification," ").concat(U?r().visible:r().hidden),children:(0,s.jsx)("h6",{className:r().notificationtext,children:"Please connect your wallet at the top right of the page"})})]})]}),(0,s.jsx)("div",{id:"header",style:{fontWeight:"bold",fontSize:"40px",color:"white",textAlign:"center"},children:"Your NFTs"}),(0,s.jsx)("div",{style:{marginBottom:"20px",marginTop:"20px"},children:c.connected&&(0,s.jsx)("div",{id:"nftList",style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"1rem",justifyContent:"center"},children:J?(0,s.jsxs)("p",{className:r().title_white,children:["Loading your NFTs ",(0,s.jsx)(p.Z,{animation:"border",role:"status",className:"mx-3",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}):(0,s.jsxs)("div",{className:r().nft_container,children:[R.map((e,t)=>(0,s.jsxs)("div",{className:r().nft,children:[(0,s.jsx)("img",{src:e.imageUrl,alt:"Token ".concat(t),className:r().nft_img}),(0,s.jsxs)("button",{className:r().battle_button,onClick:()=>{em(e.imageUrl)},children:[(0,s.jsx)(b.dkU,{})," Enter Battle"]})]},t)),(0,s.jsx)(v,{show:ei,closeDialog:()=>{es||ed||ej||el(!1)},dialogContent:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z.Header,{style:{borderColor:"#222"},children:(0,s.jsx)(h.Z.Title,{children:(0,s.jsx)(b.dkU,{style:{fontSize:"2rem"}})})}),(0,s.jsxs)(h.Z.Body,{children:[(0,s.jsx)("h2",{className:"text-center",children:"Battle Mode"}),(0,s.jsx)("div",{className:"d-flex align-items-center h-100",style:{width:"100%"},children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"my-5 d-flex justify-content-center align-items-center gap-5 mt-5 pt-5",children:[es?"loading":(0,s.jsxs)("div",{className:"".concat(r().battle_nft," ").concat(r().my_nft),children:[(0,s.jsx)("img",{src:ee,className:r().nft_img}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("p",{className:"".concat(r().battle_stats," text-center"),children:["AP: ",null==en?void 0:null===(n=en.attributes[0])||void 0===n?void 0:n.value]}),(0,s.jsxs)("p",{className:"".concat(r().battle_stats," text-center"),children:["DP: ",null==en?void 0:null===(o=en.attributes[1])||void 0===o?void 0:o.value]})]})]}),(0,s.jsx)("p",{className:r().battle_stats,children:"v/s"}),ed?(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"10rem",width:"15rem"},children:(0,s.jsx)(p.Z,{animation:"border",role:"status",className:"mx-3",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,s.jsxs)("div",{className:"".concat(r().battle_nft," ").concat(r().npc_nft),children:[(0,s.jsxs)("div",{className:r().maxi_container,children:[(0,s.jsx)("img",{src:"https://i.imgflip.com/2/8x1skt.jpg",className:r().nft_img}),(0,s.jsx)("p",{className:"".concat(r().maxi_text," text-center"),children:eg})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("p",{className:"".concat(r().battle_stats," text-center"),children:["AP: ",eh]}),(0,s.jsxs)("p",{className:"".concat(r().battle_stats," text-center"),children:["DP: ",e_]})]})]})]}),!es&&!ed&&(0,s.jsx)("div",{className:"w-100 d-flex justify-content-center mb-5 pb-5",children:(0,s.jsxs)("button",{className:r().battle_button,onClick:eC,disabled:ej,children:["Start Battle ",ej&&(0,s.jsx)(p.Z,{size:"sm",animation:"border",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})})]})})]})]})}),(0,s.jsx)(v,{show:ec,closeDialog:()=>er(!1),dialogContent:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Game Over"}),(0,s.jsx)("p",{className:r().battle_stats,children:ev}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"".concat(r().battle_button," my-5"),onClick:()=>{er(!1),el(!1)},children:"Play Again"})})]})})]})})})]}),(0,s.jsx)(j.Ix,{})]})}},1082:function(){},5291:function(e){e.exports={container:"Home_container__d256j",bg_image:"Home_bg_image__DxaMq",bg_filter:"Home_bg_filter__NfU9K",main:"Home_main__VkIEL",notification:"Home_notification__qglEL",visible:"Home_visible__o7uWL",hidden:"Home_hidden__RZvqD",notificationtext:"Home_notificationtext__vxLgv",mintstats:"Home_mintstats__xKh4l",spacebetween:"Home_spacebetween___aho_",quantityField:"Home_quantityField__3f6XV",quantityButton:"Home_quantityButton__7sL8y",background:"Home_background__nqUIs",inputbtnsbox:"Home_inputbtnsbox__NTMEf",inputbtns:"Home_inputbtns__l3r06",collectionBackgroundUrl:"Home_collectionBackgroundUrl__Q1wrh",mintimage:"Home_mintimage__16Rjx",title:"Home_title__hYX6j",topcorner:"Home_topcorner__vEvnr",button:"Home_button__G93Ef",description:"Home_description__uXNdx",code:"Home_code__VVrIr",logo:"Home_logo__IOQAX",grid:"Home_grid__AVljO",defaultInput:"Home_defaultInput__1CFDd",connectWalletBtn:"Home_connectWalletBtn__aAXIA",disabled:"Home_disabled__ZI_69","modal-content":"Home_modal-content__6UzBe",walletAdapterOption:"Home_walletAdapterOption__unMg8",mintedNftCard:"Home_mintedNftCard__rQgJx",title_white:"Home_title_white__9vAMG",nft_container:"Home_nft_container__YPTJw",nft:"Home_nft__Kfj9F",nft_img:"Home_nft_img__St4Gw",battle_button:"Home_battle_button__m1tzG",battle_stats:"Home_battle_stats__o1qP_",maxi_container:"Home_maxi_container__ocT8T",maxi_text:"Home_maxi_text__5CWZ_"}}},function(e){e.O(0,[127,588,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);